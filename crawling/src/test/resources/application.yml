spring:
  flyway:
    enabled: false

  jpa:
    hibernate:
      ddl-auto: none
    open-in-view: false
    properties:
      hibernate:
        dialect: org.hibernate.dialect.MySQLDialect

  datasource:
    url: jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;MODE=MySQL;DATABASE_TO_UPPER=false
    driver-class-name: org.h2.Driver
    username: sa
    password:
    hikari:
      maximumPoolSize: 5
      minimumIdle: 1
      connectionTimeout: 30000
      maxLifetime: 1800000
      poolName: crawling-hikari-test

  sql:
    init:
      mode: never
      data-locations: false

api:
  kbo:
    base-url: https://www.koreabaseball.com/ws
    connect-timeout: 5s
    read-timeout: 30s
    content-type: application/x-www-form-urlencoded; charset=UTF-8

kbo:
  crawler:
    base-url: https://www.koreabaseball.com/Schedule/ScoreBoard.aspx
    navigation-timeout: 60000
    table-timeout: 30000
    wait-timeout: 30000
    max-retries: 1
    retry-delay: 500
    context-pool-size: 2

    runner:
      enabled: false
      schedule-type: "regular"

  selectors:
    # 달력 네비게이션
    calendar:
      trigger: "//img[contains(@class, 'ui-datepicker-trigger')]"
      container: "//div[@id='ui-datepicker-div']"
      year-select: "//select[contains(@class, 'ui-datepicker-year')]"
      month-select: "//select[contains(@class, 'ui-datepicker-month')]"
      day-link: "//div[@id='ui-datepicker-div']//td[not(contains(@class,'ui-datepicker-other-month'))]//a[normalize-space(text())='%s']"
      date-label: "//span[@id='cphContents_cphContents_cphContents_lblGameDate']"
      update-panel: "//div[@id='cphContents_cphContents_cphContents_udpRecord']"

    # 스코어보드
    scoreboard:
      container: "//div[contains(@class, 'smsScore')]"
      status: ".//span[contains(@class, 'flag')]/span"
      stadium: ".//em[contains(@class, 'place')]"
      start-time: ".//em[contains(@class, 'place')]/span"

      # 팀 정보
      away-team:
        name: ".//div[contains(@class, 'leftTeam')]//span[contains(@class, 'teamT')]"
        score: ".//div[contains(@class, 'leftTeam')]//span[contains(@class, 'score')]/span"

      home-team:
        name: ".//div[contains(@class, 'rightTeam')]//span[contains(@class, 'teamT')]"
        score: ".//div[contains(@class, 'rightTeam')]//span[contains(@class, 'score')]/span"

      # 박스스코어 링크
      box-score-link: ".//a[contains(@class, 'btnSms')]//a[contains(@href, 'gameId=')]"

      # 이닝별 점수 테이블
      score-table:
        table: ".//table[contains(@class, 'tScore')]"
        rows: ".//tbody/tr"
        team-name: ".//th"
        cells: ".//td"

      # 투수 정보
      pitcher:
        container: ".//div[contains(@class, 'score_wrap')]//p[contains(@class, 'win')]"
        spans: ".//span"

  # 정규표현식 패턴
  patterns:
    pitcherLabel: "^\\s*(승|세|패)\\s*[:：]\\s*(.+?)\\s*$"
    dateFormat: "yyyy.MM.dd"
    timeFormat: "HH:mm"
